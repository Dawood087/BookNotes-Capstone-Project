<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Manga Notes by David P.</title>

    <!-- Bootstrap Link for Styling-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body class="bg-light">
    <!--Setting the Background Color of the whole Website-->

    <!--Navbar - Collapses when Screensize reduces-->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary p-3 shadow-sm">
      <div class="container-fluid">
        <a class="navbar-brand me-4 d-flex align-items-center" href="/">
          <span class="fs-4 me-2">üìñ</span>
          Manga Notes
        </a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul
            class="navbar-nav mx-auto me-lg-auto justify-content-center flex-grow-1"
          >
            <!-- Sort Options as Part of the Header-->
            <li class="nav-item">
              <a class="nav-link text-white" href="/?sort=rating&order=ASC"
                >Rating Asc.</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="/?sort=rating&order=DESC"
                >Rating Desc.</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="/?sort=id&order=DESC"
                >Recent</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="/?sort=id&order=ASC"
                >Oldest</a
              >
            </li>
          </ul>
          <!-- Button to Add a New Manga -> Redirects to a new Page-->
          <div class="d-flex ms-lg-auto">
            <a href="/new" class="btn btn-success">+ New Manga</a>
          </div>
        </div>
      </div>
    </nav>
    <!-- Contaienr for all the Mangas / Books added-->
    <div class="container mt-4">
      <h2 class="h4 text-secondary mb-4">My MangasüèØ</h2>

      <div
        class="bookList row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4"
      >
        <!--Card, that is created for every Book-->
        <% books.forEach(function(book) { %>
        <div class="col">
          <div class="card h-100 shadow-sm listItem">
            <!-- Making the Cover Image also Clickable, to redirect to View Page-->
            <a href="/view/<%= book.id %>">
              <% if (book.isbn) { %>
              <img
                class="card-img-top bookCover"
                src="https://covers.openlibrary.org/b/isbn/<%= book.isbn %>-M.jpg"
                alt="Cover for <%= book.title %>"
                style="height: 300px; object-fit: cover"
              />

              <!-- If ISBN has no Value - set the Image to Place Holder Image -->
              <% } else { %>
              <img
                class="card-img-top bookCover"
                src="https://static.wixstatic.com/media/a7a45a_56f23830b5ef4a80a0d6387712433ca5~mv2.jpg"
                alt="Placeholder Cover"
                style="height: 300px; object-fit: cover"
              />
              <% } %>
            </a>

            <div class="card-body bookInfo">
              <h5 class="card-title text-truncate"><%= book.title %></h5>
              <p class="card-text text-muted small"><%= book.author %></p>

              <span class="badge bg-info text-dark"
                >Rating: <%= book.rating %> / 10</span
              >
            </div>

            <!-- Card Footer  with redirecting Link Buttons-->
            <div
              class="card-footer d-flex justify-content-between actionButtons"
            >
              <a
                href="/edit/<%= book.id %>"
                class="btn btn-sm btn-outline-secondary"
                >Edit</a
              >
              <a href="/view/<%= book.id %>" class="btn btn-sm btn-primary"
                >View Details</a
              >
            </div>
          </div>
        </div>
        <% }) %>
      </div>

      <!-- Bootstrap JS Script Connection-->
      <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"
      ></script>
    </div>
  </body>
</html>
